<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Flutter VS Code Extension</title>
  <script>
    // Bridge for communication with VS Code
    const vscode = acquireVsCodeApi();

    window.addEventListener('message', event => {
      const message = event.data;
      if (message && message.requestId) {
        // Forward response back to Flutter
        window.postMessage(message, '*');
      }
    });

    // Override postMessage to send to VS Code
    const originalPostMessage = window.postMessage;
    window.postMessage = function(message, origin) {
      if (typeof message === 'object' && message.command) {
        vscode.postMessage(message);
      } else {
        originalPostMessage.call(window, message, origin);
      }
    };
  </script>
  <script src="flutter_bootstrapper.js"></script>
</head>
<body>
  <div id="output"></div>
  <script src="main.dart.js"></script>
</body>
</html>
